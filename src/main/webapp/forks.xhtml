<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
>

<!--
rowStyleClass="#{marketPositionFastCompare.sellMarketPosition.active eq false or
                                                marketPositionFastCompare.buyMarketPosition.active eq false ? 'notActiveWallet' : null}
                                            #{marketPositionFastCompare.lieProfitByGlasses ? 'lieProfitByGlasses' : null}"

                                            filteredValue="#{webDataController.filteredCompareList}"
-->
<h:body>
    <ui:composition template="/template/commonLayout.xhtml">
        <ui:define name="content">
            <h:form>
                <p:dataTable id="marketPositionsCompareTable" styleClass="marketSymbolsCompareTable"
                             var="fork"
                             value="#{webDataController.currentForks}"
                             rows="20"

                >
                    <!-- START orders and profits subtable collumns -->
                    <p:rowExpansion>
                        <div class="expansionWrapper">
                            <div class="profitsTableWrapper">
                                <p:dataTable var="profit"
                                             value="#{fork.profits}">
                                    <f:facet name="header">
                                        Profits by depos / Профиты по депозитам
                                    </f:facet>
                                    <p:column headerText="Deposit">
                                        <h:outputText value="#{profit.deposit}">
                                            <f:convertNumber minFractionDigits="8" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Average buy price (we buy)">
                                        <h:outputText value="#{profit.averageSellStackPrice}">
                                            <f:convertNumber minFractionDigits="8" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Buy limit price for order">
                                        <h:outputText value="#{profit.sellLimitPrice}">
                                            <f:convertNumber minFractionDigits="8" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Buy glass last update" style="width:63px">
                                        <h:outputText value="#{profit.sellGlassUpdated}">
                                            <f:convertDateTime pattern="HH:mm:ss"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Average sell price (we sell)">
                                        <h:outputText value="#{profit.averageBuyStackPrice}">
                                            <f:convertNumber minFractionDigits="8" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Buy limit price for order">
                                        <h:outputText value="#{profit.sellLimitPrice}">
                                            <f:convertNumber minFractionDigits="8" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Sell limit price for order">
                                        <h:outputText value="#{profit.buyLimitPrice}">
                                            <f:convertNumber minFractionDigits="8" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Sell glass last update" style="width:63px">
                                        <h:outputText value="#{profit.buyGlassUpdated}">
                                            <f:convertDateTime pattern="HH:mm:ss"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Final coin amount">
                                        <h:outputText value="#{profit.finalCoinsAmount}">
                                            <f:convertNumber minFractionDigits="8" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Profit by deposit">
                                        <h:outputText value="#{profit.profit}">
                                            <f:convertNumber pattern="#0.0%" locale="en"/>
                                        </h:outputText>
                                    </p:column>

                                </p:dataTable>
                            </div>
                            <!--<div class="ordersWrapper">-->
                            <!--<div class="sellOrderBook">-->
                            <!--<p:dataTable var="sellOrder"-->
                            <!--value="#{marketPositionFastCompare.sellOrders}"-->
                            <!--rows="30">-->
                            <!--<f:facet name="header">-->
                            <!--Sell orders / Предложения продажи #{buyMarketPK.exchangeMeta.exchangeName}-->
                            <!--</f:facet>-->
                            <!--<p:column headerText="id" style="width:18px">-->
                            <!--<h:outputText value="#{sellOrder.uniLimitOrderPk.id}"/>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="Price">-->
                            <!--<h:outputText value="#{sellOrder.limitPrice}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="#{buyMarketPK.symbol.quoteName}">-->
                            <!--<h:outputText value="#{sellOrder.originalAmount}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="#{buyMarketPK.symbol.quoteName} sum">-->
                            <!--<h:outputText value="#{sellOrder.originalSum}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="#{buyMarketPK.symbol.baseName} sum">-->
                            <!--<h:outputText value="#{sellOrder.finalSum}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="Update at" style="width:63px">-->
                            <!--<h:outputText value="#{sellOrder.timeStamp}">-->
                            <!--<f:convertDateTime pattern="HH:mm:ss"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--</p:dataTable>-->
                            <!--</div>-->

                            <!--<div class="buyOrderBook">-->
                            <!--<p:dataTable var="buyOrder"-->
                            <!--value="#{marketPositionFastCompare.buyOrders}" rows="30">-->
                            <!--<f:facet name="header">-->
                            <!--Buy orders / Запросы покупи на #{sellMarketPK.exchangeMeta.exchangeName}-->
                            <!--</f:facet>-->
                            <!--<p:column headerText="id" style="width:18px">-->
                            <!--<h:outputText value="#{buyOrder.uniLimitOrderPk.id}"/>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="Price">-->
                            <!--<h:outputText value="#{buyOrder.limitPrice}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="#{buyMarketPK.symbol.quoteName}">-->
                            <!--<h:outputText value="#{buyOrder.originalAmount}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="#{buyMarketPK.symbol.baseName} sum">-->
                            <!--<h:outputText value="#{buyOrder.finalSum}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->

                            <!--<p:column headerText="#{buyMarketPK.symbol.quoteName} sum">-->
                            <!--<h:outputText value="#{buyOrder.originalSum}">-->
                            <!--<f:convertNumber minFractionDigits="8" locale="en"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->

                            <!--<p:column headerText="Update at" style="width:63px">-->
                            <!--<h:outputText value="#{buyOrder.timeStamp}">-->
                            <!--<f:convertDateTime pattern="HH:mm:ss"/>-->
                            <!--</h:outputText>-->
                            <!--</p:column>-->
                            <!--</p:dataTable>-->
                            <!--</div>-->
                            <!--</div>-->
                        </div>
                    </p:rowExpansion>

                    <!-- START collumns of main table -->
                    <p:column style="width:16px">
                        <p:rowToggler/>
                    </p:column>
                    <p:column headerText="Symbol">
                        <h:outputText value="#{fork.symbol.name}"/>
                    </p:column>
                    <!-- filterBy="#{fork.buyExchangeMeta.exchangeName}" filterMatchMode="contains" -->
                    <p:column headerText="Buy exchange, link to pair market">
                        #{fork.buyExchangeMeta.exchangeName}
                        <!--<h:outputLink value="#{marketPositionFastCompare.buySymbolExchangeUrl}#{buyMarketPK.exchangeMeta.refParam}" target="_blank">

                        </h:outputLink>-->
                    </p:column>
                    <!-- filterBy="#{fork.sellExchangeMeta.exchangeName}" filterMatchMode="contains" -->
                    <p:column headerText="Sell exchange, link to pair market">
                        #{fork.sellExchangeMeta.exchangeName}
                        <!--<h:outputLink value="#{marketPositionFastCompare.sellSymbolExchangeUrl}#{sellMarketPK.exchangeMeta.refParam}" target="_blank">

                        </h:outputLink>-->
                    </p:column>
                    <p:column headerText="Deposit">
                        <h:outputText value="#{fork.profits[0].deposit}">
                            <f:convertNumber minFractionDigits="8" locale="en"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Profit by deposit">
                        <h:outputText value="#{fork.profits[0].profit}">
                            <f:convertNumber pattern="#0.0%"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Start at">
                        <h:outputText value="#{fork.startTime}">
                            <f:convertDateTime pattern="HH:mm:ss"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Update at">
                        <h:outputText value="#{fork.lastUpdatedTime}">
                            <f:convertDateTime pattern="HH:mm:ss"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </h:form>
        </ui:define>
    </ui:composition>
</h:body>
</html>

